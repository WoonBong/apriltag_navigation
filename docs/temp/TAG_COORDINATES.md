# 태그 좌표 변환표 (Isaac Sim → Manipulator)

모든 AprilTag의 좌표를 Isaac Sim 좌표계에서 Manipulator 좌표계로 변환한 결과입니다.

## 좌표 변환 공식

```python
# Isaac Sim → Manipulator
manip_x = -isaac_y
manip_y = -isaac_x
```

---

## DOCK (도킹 스테이션)

| Tag ID | Type | Zone | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|------|------|---------|---------|-------------|-------------|
| 508 | DOCK | DOCK | -0.3975 | 5.35 | **-5.35** | **0.3975** |

---

## PIVOT Tags (회전 지점)

| Tag ID | Name | Zone | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|------|------|---------|---------|-------------|-------------|
| 500 | Entry_LB | A | 0.0525 | 5.35 | **-5.35** | **-0.0525** |
| 501 | Exit_LB | B | -0.3975 | 5.80 | **-5.80** | **0.3975** |
| 502 | Entry_MB | A | 3.2525 | 5.35 | **-5.35** | **-3.2525** |
| 503 | Exit_MB | C | 2.8025 | 4.90 | **-4.90** | **-2.8025** |
| 504 | Entry_MB_R | A | 3.9225 | 5.35 | **-5.35** | **-3.9225** |
| 505 | Exit_MB_R | D | 3.4725 | 5.80 | **-5.80** | **-3.4725** |
| 506 | Entry_RB | A | 7.1225 | 5.35 | **-5.35** | **-7.1225** |
| 507 | Exit_RB | E | 6.6725 | 4.90 | **-4.90** | **-6.6725** |

---

## Zone A: Moving Tags (복도 - 왼쪽)

| Tag ID | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|---------|---------|-------------|-------------|
| 400 | 0.4525 | 5.35 | **-5.35** | **-0.4525** |
| 401 | 0.8525 | 5.35 | **-5.35** | **-0.8525** |
| 402 | 1.2525 | 5.35 | **-5.35** | **-1.2525** |
| 403 | 1.6525 | 5.35 | **-5.35** | **-1.6525** |
| 404 | 2.0525 | 5.35 | **-5.35** | **-2.0525** |
| 405 | 2.4525 | 5.35 | **-5.35** | **-2.4525** |
| 406 | 2.8525 | 5.35 | **-5.35** | **-2.8525** |

---

## Zone A: Moving Tags (복도 - 오른쪽)

| Tag ID | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|---------|---------|-------------|-------------|
| 408 | 4.3225 | 5.35 | **-5.35** | **-4.3225** |
| 409 | 4.7225 | 5.35 | **-5.35** | **-4.7225** |
| 410 | 5.1225 | 5.35 | **-5.35** | **-5.1225** |
| 411 | 5.5225 | 5.35 | **-5.35** | **-5.5225** |
| 412 | 5.9225 | 5.35 | **-5.35** | **-5.9225** |
| 413 | 6.3225 | 5.35 | **-5.35** | **-6.3225** |
| 414 | 6.7225 | 5.35 | **-5.35** | **-6.7225** |

---

## Transition Tags (전환 구역)

| Tag ID | Zone | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|------|---------|---------|-------------|-------------|
| 407 | C | 2.8025 | 4.395 | **-4.395** | **-2.8025** |
| 415 | E | 6.6725 | 4.395 | **-4.395** | **-6.6725** |

---

## Zone B: Work Tags (111 → 100)

| Tag ID | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|---------|---------|-------------|-------------|
| 111 | -0.3975 | 4.85 | **-4.85** | **0.3975** |
| 110 | -0.3975 | 4.45 | **-4.45** | **0.3975** |
| 109 | -0.3975 | 4.05 | **-4.05** | **0.3975** |
| 108 | -0.3975 | 3.65 | **-3.65** | **0.3975** |
| 107 | -0.3975 | 3.25 | **-3.25** | **0.3975** |
| 106 | -0.3975 | 2.85 | **-2.85** | **0.3975** |
| 105 | -0.3975 | 2.45 | **-2.45** | **0.3975** |
| 104 | -0.3975 | 2.05 | **-2.05** | **0.3975** |
| 103 | -0.3975 | 1.65 | **-1.65** | **0.3975** |
| 102 | -0.3975 | 1.25 | **-1.25** | **0.3975** |
| 101 | -0.3975 | 0.85 | **-0.85** | **0.3975** |
| 100 | -0.3975 | 0.45 | **-0.45** | **0.3975** |

---

## Zone C: Work Tags (112 → 123)

| Tag ID | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|---------|---------|-------------|-------------|
| 112 | 2.8025 | 3.995 | **-3.995** | **-2.8025** |
| 113 | 2.8025 | 3.595 | **-3.595** | **-2.8025** |
| 114 | 2.8025 | 3.195 | **-3.195** | **-2.8025** |
| 115 | 2.8025 | 2.795 | **-2.795** | **-2.8025** |
| 116 | 2.8025 | 2.395 | **-2.395** | **-2.8025** |
| 117 | 2.8025 | 1.995 | **-1.995** | **-2.8025** |
| 118 | 2.8025 | 1.595 | **-1.595** | **-2.8025** |
| 119 | 2.8025 | 1.195 | **-1.195** | **-2.8025** |
| 120 | 2.8025 | 0.795 | **-0.795** | **-2.8025** |
| 121 | 2.8025 | 0.395 | **-0.395** | **-2.8025** |
| 122 | 2.8025 | -0.005 | **0.005** | **-2.8025** |
| 123 | 2.8025 | -0.405 | **0.405** | **-2.8025** |

---

## Zone D: Work Tags (135 → 124)

| Tag ID | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|---------|---------|-------------|-------------|
| 135 | 3.4725 | 4.85 | **-4.85** | **-3.4725** |
| 134 | 3.4725 | 4.45 | **-4.45** | **-3.4725** |
| 133 | 3.4725 | 4.05 | **-4.05** | **-3.4725** |
| 132 | 3.4725 | 3.65 | **-3.65** | **-3.4725** |
| 131 | 3.4725 | 3.25 | **-3.25** | **-3.4725** |
| 130 | 3.4725 | 2.85 | **-2.85** | **-3.4725** |
| 129 | 3.4725 | 2.45 | **-2.45** | **-3.4725** |
| 128 | 3.4725 | 2.05 | **-2.05** | **-3.4725** |
| 127 | 3.4725 | 1.65 | **-1.65** | **-3.4725** |
| 126 | 3.4725 | 1.25 | **-1.25** | **-3.4725** |
| 125 | 3.4725 | 0.85 | **-0.85** | **-3.4725** |
| 124 | 3.4725 | 0.45 | **-0.45** | **-3.4725** |

---

## Zone E: Work Tags (136 → 147)

| Tag ID | Isaac X | Isaac Y | **Manip X** | **Manip Y** |
|--------|---------|---------|-------------|-------------|
| 136 | 6.6725 | 3.995 | **-3.995** | **-6.6725** |
| 137 | 6.6725 | 3.595 | **-3.595** | **-6.6725** |
| 138 | 6.6725 | 3.195 | **-3.195** | **-6.6725** |
| 139 | 6.6725 | 2.795 | **-2.795** | **-6.6725** |
| 140 | 6.6725 | 2.395 | **-2.395** | **-6.6725** |
| 141 | 6.6725 | 1.995 | **-1.995** | **-6.6725** |
| 142 | 6.6725 | 1.595 | **-1.595** | **-6.6725** |
| 143 | 6.6725 | 1.195 | **-1.195** | **-6.6725** |
| 144 | 6.6725 | 0.795 | **-0.795** | **-6.6725** |
| 145 | 6.6725 | 0.395 | **-0.395** | **-6.6725** |
| 146 | 6.6725 | -0.005 | **0.005** | **-6.6725** |
| 147 | 6.6725 | -0.405 | **0.405** | **-6.6725** |

---

## 전체 태그 개수 요약

| 구분 | 개수 |
|------|------|
| DOCK | 1 |
| PIVOT | 8 |
| Zone A (Moving) | 14 |
| Transition | 2 |
| Zone B (Work) | 12 |
| Zone C (Work) | 12 |
| Zone D (Work) | 12 |
| Zone E (Work) | 12 |
| **총계** | **73개** |

---

## 좌표계 설명

### Isaac Sim 좌표계
- X축: 좌우 (왼쪽 +, 오른쪽 -)
- Y축: 전후 (앞 +, 뒤 -)
- 원점: 도킹 스테이션 기준

### Manipulator 좌표계
- X축: Isaac Y축의 반대 방향
- Y축: Isaac X축의 반대 방향
- 변환: `(manip_x, manip_y) = (-isaac_y, -isaac_x)`

### 변환 예시
- Tag 100 (Zone B)
  - Isaac: (-0.3975, 0.45)
  - Manipulator: (-0.45, 0.3975)

- Tag 508 (Dock)
  - Isaac: (-0.3975, 5.35)
  - Manipulator: (-5.35, 0.3975)

---

## 사용 방법

Mode 4 (Scan Mode)에서 Manipulator에게 pose를 전송할 때:

```python
from apriltag_navigation.navigation.pure_pursuit import CoordinateTransformer

# Isaac 좌표
isaac_x = -0.3975
isaac_y = 0.45

# Manipulator 좌표로 변환
manip_x, manip_y = CoordinateTransformer.isaac_to_manipulator(isaac_x, isaac_y)
# 결과: manip_x = -0.45, manip_y = 0.3975

# ROS 토픽으로 발행
pose_msg.x = manip_x
pose_msg.y = manip_y
pose_publisher.publish(pose_msg)
```

---

## 검증 예시

### Tag 100 (참조점)
```
Isaac Sim:    (-0.3975, 0.45)
Manipulator:  (-0.45, 0.3975)  ✓ 일치!
```

### Tag 508 (Dock)
```
Isaac Sim:    (-0.3975, 5.35)
Manipulator:  (-5.35, 0.3975)  ✓
```

### 변환 역산 확인
```python
# Manipulator → Isaac 역변환
isaac_x = -manip_y
isaac_y = -manip_x

# 예: Tag 100
manip_x = -0.45
manip_y = 0.3975
→ isaac_x = -0.3975  ✓
→ isaac_y = 0.45     ✓
```
